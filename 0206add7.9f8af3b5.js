(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{74:function(e,t,o){"use strict";o.r(t),o.d(t,"frontMatter",(function(){return c})),o.d(t,"metadata",(function(){return p})),o.d(t,"toc",(function(){return s})),o.d(t,"default",(function(){return l}));var n=o(3),i=o(7),r=(o(0),o(105)),d=["components"],c={id:"deploy",title:"Deploy Godwoken"},p={unversionedId:"introduction/deploy",id:"introduction/deploy",isDocsHomePage:!1,title:"Deploy Godwoken",description:"Godwoken Deployment Process",source:"@site/docs\\introduction\\godwoken_deploy.md",slug:"/introduction/deploy",permalink:"/ckb_sdk/docs/introduction/deploy",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/introduction/godwoken_deploy.md",version:"current",sidebar:"sidebar2",previous:{title:"Godwoken",permalink:"/ckb_sdk/docs/introduction/godwoken"}},s=[{value:"Step 1 Launch the CKB node with Tippy",id:"step-1-launch-the-ckb-node-with-tippy",children:[]},{value:"Step 2 Clone the Source with Git",id:"step-2-clone-the-source-with-git",children:[]},{value:"Step 3 Duplicate a password file pk and a scripts-build.json file to the deploy folder\uff08\u9a6c\u514b \u8981\u95ee\uff09",id:"step-3-duplicate-a-password-file-pk-and-a-scripts-buildjson-file-to-the-deploy-folder\uff08\u9a6c\u514b-\u8981\u95ee\uff09",children:[]},{value:"Step 4 Run the Setup Subcommand in GW-Tools Crate",id:"step-4-run-the-setup-subcommand-in-gw-tools-crate",children:[]},{value:"Step 5 Modify the Reward Lock",id:"step-5-modify-the-reward-lock",children:[]},{value:"Step 6 Start the Godwoken Node",id:"step-6-start-the-godwoken-node",children:[]}],a={toc:s};function l(e){var t=e.components,o=Object(i.a)(e,d);return Object(r.b)("wrapper",Object(n.a)({},a,o,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h1",{id:"godwoken-deployment-process"},"Godwoken Deployment Process"),Object(r.b)("p",null,"Before entering the deployment process, make sure you have installed everything relevant as listed in the ",Object(r.b)("strong",{parentName:"p"},"Prerequisites")," above."),Object(r.b)("h3",{id:"step-1-launch-the-ckb-node-with-tippy"},"Step 1 Launch the CKB node with Tippy"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"`$ ``cd`` tippy``-``linux``-``x64``\n$ ./Tippy\n`\n")),Object(r.b)("p",null,"Tippy is a tool to help set up and manage CKB nodes. For more information, see the instruction of ",Object(r.b)("a",{parentName:"p",href:"https://cryptape.github.io/lumos-doc/docs/reference/ckbnode#install-a-ckb-node-by-using-tippy"},"Install a CKB node on DEV chain by using Tippy"),". "),Object(r.b)("p",null,"Tippy is able to facilitate the modification of lock arg so as to acquire ckb. Furthermore, the miner configuration needs to be modified(using tippy). Once the parameters are modified, the existing data must be erased before enabling the ckb node and miner on the tippy dashboard. Refer to ",Object(r.b)("a",{parentName:"p",href:"https://cryptape.github.io/lumos-doc/docs/reference/ckbnode#install-a-ckb-node-by-using-tippy"},"CKB Nodes and Networks")," for more details."),Object(r.b)("h3",{id:"step-2-clone-the-source-with-git"},"Step 2 Clone the Source with Git"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"git clone --recursive https://github.com/nervosnetwork/godwoken\ncd godwoken\n")),Object(r.b)("h3",{id:"step-3-duplicate-a-password-file-pk-and-a-scripts-buildjson-file-to-the-deploy-folder\uff08\u9a6c\u514b-\u8981\u95ee\uff09"},"Step 3 Duplicate a password file pk and a scripts-build.json file to the deploy folder\uff08\u9a6c\u514b \u8981\u95ee\uff09"),Object(r.b)("h3",{id:"step-4-run-the-setup-subcommand-in-gw-tools-crate"},"Step 4 Run the Setup Subcommand in GW-Tools Crate"),Object(r.b)("p",null,"The setup subcommand in gw-tools crate completes all setups prior to godwoken node starting as in preparing scripts, deploying scripts, deploying layer 2 genesis blocks, and generating configuration files.\nRun the following command:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"RUST_LOG=info cargo +nightly run --bin gw-tools -- setup -s deploy/scripts-build.json -k deploy/pk -o deploy/\n")),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},Object(r.b)("strong",{parentName:"p"},"Note:")," During this process, an error may be reported. Look carefully at the error message to find the source of the problem. If the connection error occurs, replace /tmp/scripts-build-dir/godwoken-polyjuice/Makefile line 157 and line 161 with #comment in the program after the error occurred.  (\u5f85\u5b9a)")),Object(r.b)("h3",{id:"step-5-modify-the-reward-lock"},"Step 5 Modify the Reward Lock"),Object(r.b)("p",null,"Once the setup command completed successfully, a reward lock needs to be setup in the node's config.toml, the default relative path is deploy/node1/config.toml:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"[block_producer.challenger_config.rewards_receiver_lock]code_hash = '<code_hash>'hash_type = 'type'args = '0x'\n")),Object(r.b)("h3",{id:"step-6-start-the-godwoken-node"},"Step 6 Start the Godwoken Node"),Object(r.b)("p",null,"Input the following command to start the godwoken node:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"RUST_LOG=info cargo +nightly run --bin godwoken run -c deploy/node1/config.toml\n")))}l.isMDXComponent=!0}}]);