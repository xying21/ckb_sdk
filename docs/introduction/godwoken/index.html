<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/ckb_sdk/blog/rss.xml" title="My Site Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ckb_sdk/blog/atom.xml" title="My Site Blog Atom Feed"><title data-react-helmet="true">Godwoken | My Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Godwoken | My Site"><meta data-react-helmet="true" name="description" content="Godwoken is a layer 2 rollup framework for Nervos CKB. It provides scaling capabilities with rollups that perform transaction execution outside CKB chain."><meta data-react-helmet="true" property="og:description" content="Godwoken is a layer 2 rollup framework for Nervos CKB. It provides scaling capabilities with rollups that perform transaction execution outside CKB chain."><meta data-react-helmet="true" property="og:url" content="https://github.com/xying21/ckb_sdk/ckb_sdk/docs/introduction/godwoken"><link data-react-helmet="true" rel="shortcut icon" href="/ckb_sdk/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/xying21/ckb_sdk/ckb_sdk/docs/introduction/godwoken"><link rel="stylesheet" href="/ckb_sdk/styles.b72c9eed.css">
<link rel="preload" href="/ckb_sdk/styles.9a6c7397.js" as="script">
<link rel="preload" href="/ckb_sdk/runtime~main.0a17a10f.js" as="script">
<link rel="preload" href="/ckb_sdk/main.307d8fcc.js" as="script">
<link rel="preload" href="/ckb_sdk/common.4c10f815.js" as="script">
<link rel="preload" href="/ckb_sdk/27.cd73ab9e.js" as="script">
<link rel="preload" href="/ckb_sdk/28.fc14df1c.js" as="script">
<link rel="preload" href="/ckb_sdk/f976f453.df75b6c2.js" as="script">
<link rel="preload" href="/ckb_sdk/17896441.153feb48.js" as="script">
<link rel="preload" href="/ckb_sdk/9e4b9458.49cb3b71.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/ckb_sdk/"><img src="/ckb_sdk/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/ckb_sdk/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/ckb_sdk/"><img src="/ckb_sdk/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/ckb_sdk/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CKB SDKs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ckb_sdk/docs/introduction/overview_go">ckb-sdk-go</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ckb_sdk/docs/introduction/overview_java">ckb-sdk-java</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Godwoken</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/ckb_sdk/docs/introduction/godwoken">Godwoken</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Godwoken</h1></header><div class="markdown"><p><strong>Godwoken</strong> is a layer 2 rollup framework for Nervos CKB. It provides scaling capabilities with rollups that perform transaction execution outside CKB chain.</p><p>Godwoken supports optimistic rollups that can use the always success script or <a href="https://github.com/nervosnetwork/clerkb" target="_blank" rel="noopener noreferrer">Proof of Authority</a> to issue layer 2 blocks. When POA is used, limited <code>block_producers</code> can issue layer 2 blocks. For more information, see <a href="https://github.com/nervosnetwork/godwoken/blob/master/docs/life_of_a_godwoken_transaction.md#life-of-a-godwoken-transaction" target="_blank" rel="noopener noreferrer">Life of a Godwoken transaction</a>.</p><p>Godwoken can support porting Ethereum DApps to CKB when it is integrated with Polyjuice. Polyjuice is an Ethereum compatible layer that allows Solidity based smart contracts to run on Nervos. Polyjuice uses <a href="https://github.com/ethereum/evmone" target="_blank" rel="noopener noreferrer">evmone</a> as the EVM implementation in both <code>generator</code> and <code>validator</code>. It accepts Ethrereum transactions and execute the transactions in EVM. For more information, see <a href="https://github.com/nervosnetwork/godwoken-polyjuice" target="_blank" rel="noopener noreferrer">Polyjuice for Godwoken</a> and <a href="https://github.com/nervosnetwork/godwoken/blob/master/docs/life_of_a_polyjuice_transaction.md" target="_blank" rel="noopener noreferrer">Life of a Polyjuice Transaction</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="how-does-it-work"></a>How Does It Work?<a class="hash-link" href="#how-does-it-work" title="Direct link to heading">#</a></h2><p>Godwoken works by using <strong>aggregator</strong> nodes. The aggregator nodes are used to:</p><ol><li>Collect specially designed layer 2 transactions.</li><li>Pack the special transactions into CKB transactions that can also be considered as layer 2 blocks.</li><li>Submit the CKB transactions to layer 1 for acceptance. </li></ol><img src="/ckb_sdk/img/godwoken.png" width="70%"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="quickstart"></a>Quickstart<a class="hash-link" href="#quickstart" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="environment"></a>Environment<a class="hash-link" href="#environment" title="Direct link to heading">#</a></h3><ul><li>OS: Ubuntu 20.04</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="prerequisites"></a>Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h3><ul><li><p><a href="https://github.com/nervosnetwork/capsule" target="_blank" rel="noopener noreferrer">Capsule</a></p></li><li><p><a href="https://github.com/nervosnetwork/molecule" target="_blank" rel="noopener noreferrer">Moleculec</a></p></li><li><p>Rust nightly</p></li><li><p>Docker</p></li><li><p>A CKB node ( &gt;= 0.40.0) is installed and running on DEV chain. For more information about installing a CKB node, see <a href="https://cryptape.github.io/lumos-doc/docs/reference/ckbnode#install-a-ckb-node-by-using-tippy" target="_blank" rel="noopener noreferrer">Install a CKB Node by Using Tippy</a>.</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="deploy-godwoken"></a>Deploy Godwoken<a class="hash-link" href="#deploy-godwoken" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="step-1-build-scripts"></a>Step 1. Build scripts<a class="hash-link" href="#step-1-build-scripts" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd godwoken-scripts &amp;&amp; cd c &amp;&amp; make &amp;&amp; cd - &amp;&amp; capsule build --release --debug-output</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="step-2-build-poa-scripts"></a>Step 2. Build PoA scripts<a class="hash-link" href="#step-2-build-poa-scripts" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">git clone --recursive https://github.com/nervosnetwork/clerkb</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd clerkb</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">yarn</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">make all-via-docker</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cp build/debug/poa godwoken-scripts/build/release/poa</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cp build/debug/state godwoken-scripts/build/release/state</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="step-3-deploy-scripts"></a>Step 3. Deploy scripts<a class="hash-link" href="#step-3-deploy-scripts" title="Direct link to heading">#</a></h4><p>Create scripts-deploy.json</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir deploy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">touch deploy/scripts-deploy.json</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;programs&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;custodian_lock&quot;: &quot;/scripts/release/always-success&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;deposition_lock&quot;: &quot;/scripts/release/always-success&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;withdrawal_lock&quot;: &quot;/scripts/release/always-success&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;challenge_lock&quot;: &quot;/scripts/release/always-success&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;stake_lock&quot;: &quot;/scripts/release/always-success&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;state_validator&quot;: &quot;/scripts/release/always-success&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;l2_sudt_validator&quot;: &quot;/scripts/release/always-success&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;meta_contract_validator&quot;: &quot;/scripts/release/always-success&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;eth_account_lock&quot;: &quot;/scripts/release/always-success&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;tron_account_lock&quot;: &quot;/scripts/release/always-success&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;polyjuice_validator&quot;: &quot;/scripts/release/always-success&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;state_validator_lock&quot;: &quot;/scripts/release/always-success&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;poa_state&quot;: &quot;/scripts/release/always-success&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;lock&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;code_hash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;hash_type&quot;: &quot;data&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;args&quot;: &quot;0x&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Replace the always-success with the real one in scripts-deploy.json above.</p><p>Command:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd godwoken</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cargo run --bin gw-tools -- deploy-scripts -i deploy/scripts-deploy.json -o deploy/scripts-deploy-result.json -k ../ckb_nodes/dev1/pk</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="step-4-deploy-layer2-genesis"></a>Step 4. Deploy layer2 genesis<a class="hash-link" href="#step-4-deploy-layer2-genesis" title="Direct link to heading">#</a></h4><p>Create poa-config.json</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">touch deploy/poa-config.json</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>setup two godwoken nodes:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;poa_setup&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;identity_size&quot;: 32,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;round_interval_uses_seconds&quot;: true,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;identities&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;&lt;Godwoken wallet lock script hash 1&gt;&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;&lt;Godwoken wallet lock script hash 2&gt;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;aggregator_change_threshold&quot;: 2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;round_intervals&quot;: 24,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;subblocks_per_round&quot;: 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Create rollup-config.json</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">touch deploy/rollup-config.json</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;l1_sudt_script_type_hash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;burn_lock_hash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;required_staking_capacity&quot;: 10000000000,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;challenge_maturity_blocks&quot;: 5,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;finality_blocks&quot;: 20,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;reward_burn_rate&quot;: 50,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;compatible_chain_id&quot;: 0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;allowed_eoa_type_hashes&quot;: []</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Command:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">cargo run --bin gw-tools -- deploy-genesis -k deploy/pk_gw1 -d deploy/scripts-deploy-result.json -p deploy/poa-config.json -u deploy/rollup-config.json -o deploy/genesis-deploy-result.json</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="step-5-build-polyjuice"></a>Step 5. Build polyjuice<a class="hash-link" href="#step-5-build-polyjuice" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">git clone --recursive https://github.com/nervosnetwork/godwoken-polyjuice.git</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd godwoken-polyjuice &amp;&amp; make all-via-docker</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cp build/generator /deploy/polyjuice-generator</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># We should use real one in the later version</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cp /godwoken-scripts/build/release/always-success /deploy/polyjuice-validator</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="step-6-generate-godwoken-config"></a>Step 6. Generate godwoken config<a class="hash-link" href="#step-6-generate-godwoken-config" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">cargo run --bin gw-tools -- generate-config -g deploy/genesis-deploy-result.json -s deploy/scripts-deploy-result.json -p deploy/ -o config.toml</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Update config.toml for every godwoken node:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[rpc_server]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">listen = &#x27;localhost:8119&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[backends]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">validator_path = &#x27;deploy/polyjuice-validator&#x27; # update the path to your own</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">generator_path = &#x27;deploy/polyjuice-generator&#x27; # update the path to your own</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[block_producer.wallet_config]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">privkey_path = &#x27;./deploy/pk_gw1&#x27; # update godwoken node private key path</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[block_producer.wallet_config.lock]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">code_hash = &#x27;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&#x27; # update to the block_assembler.code_hash</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hash_type = &#x27;type&#x27; # update to &#x27;type&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">args = &#x27;0x3d7037a69dbb4fa019ca1b11f86b70470d2ab1d0&#x27; # update to godwoken wallet lock_arg</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Run:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">RUST_LOG=info cargo run --bin godwoken</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="step-7-start-godwoken"></a>Step 7. Start Godwoken<a class="hash-link" href="#step-7-start-godwoken" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -vgodwoken-internal/deployment-notes/testnet/operator-config.toml:/deploy/config.toml -v/deploy/godwoken-testnet-v2/pk2:/deploy/pk -eRUST_BACKTRACE=1 nervos/godwoken-prebuilds:v0.5.0-rc1 godwoken run -c /deploy/config.toml</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="step-8-setup-polyjuice"></a>Step 8. Setup Polyjuice<a class="hash-link" href="#step-8-setup-polyjuice" title="Direct link to heading">#</a></h4><p>First, clone &amp; setup <a href="https://github.com/nervosnetwork/godwoken-examples" target="_blank" rel="noopener noreferrer">godwoken-examples</a></p><p>Then, deposit to create an account. (Need some time to build index in the first time running).</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">LUMOS_CONFIG_FILE=`pwd`/config.json node ./packages/tools/lib/account-cli.js deposit -c 40000000000 -p &lt;privkey&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="step-9-start-web3-server"></a>Step 9. Start Web3 Server<a class="hash-link" href="#step-9-start-web3-server" title="Direct link to heading">#</a></h4><ol><li>Clear the postgres DB.</li><li>Run migration sql files to recreate tables.</li><li>Run server</li></ol><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -vweb3.env:/godwoken-web3/packages/api-server/.env -w/godwoken-web3 nervos/godwoken-js-prebuilds:v0.3.1-rc2 yarn workspace @godwoken-web3/api-server start</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="references"></a>References<a class="hash-link" href="#references" title="Direct link to heading">#</a></h2><table><thead><tr><th>Resource</th><th>Link</th></tr></thead><tbody><tr><td>NervosÂ DocumentÂ Website</td><td><a href="https://docs.nervos.org/" target="_blank" rel="noopener noreferrer">https://docs.nervos.org/</a></td></tr><tr><td>Godwoken Basics</td><td><ul><li><a href="https://talk.nervos.org/t/introducing-godwoken-a-missing-piece-of-the-cell-model/4464?_360safeparam=13594453" target="_blank" rel="noopener noreferrer">Introducing Godwoken - A missing piece of the cell model</a></li><li><a href="https://medium.com/nervosnetwork/towards-ckb-style-lego-pieces-polyjuice-on-godwoken-cbc935d77abf" target="_blank" rel="noopener noreferrer">Towards CKB style Lego pieces: Polyjuice on Godwoken</a></li></ul></td></tr><tr><td>SourceÂ Code</td><td><a href="https://github.com/nervosnetwork/lumos" target="_blank" rel="noopener noreferrer">https://github.com/nervosnetwork/lumos</a></td></tr><tr><td>Godwoken-Kicker</td><td><a href="https://github.com/RetricSu/godwoken-kicker" target="_blank" rel="noopener noreferrer">Godwoken-Kicker: one line command to start godwoken-polyjuice chain</a></td></tr><tr><td>Godwoken Testnet</td><td><a href="https://github.com/jjyr/godwoken-testnet" target="_blank" rel="noopener noreferrer">Godwoken Testnet</a></td></tr><tr><td>Ethereum RPC (web3 RPC)</td><td><a href="https://geth.ethereum.org/docs/rpc/server" target="_blank" rel="noopener noreferrer">Ethereum RPC (web3 RPC)</a></td></tr><tr><td>Gitcoin Hackathon</td><td><ul><li><a href="https://github.com/Kuzirashi/gw-gitcoin-instruction" target="_blank" rel="noopener noreferrer">Godwoken Gitcoin Instruction</a></li><li><a href="https://gitcoin.co/hackathon/nervos/onboard" target="_blank" rel="noopener noreferrer">NERVOS - BROADEN THE SPECTRUM</a></li></ul></td></tr></tbody></table></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/introduction/overview.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/ckb_sdk/docs/introduction/overview_java"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« ckb-sdk-java</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-does-it-work" class="table-of-contents__link">How Does It Work?</a></li><li><a href="#quickstart" class="table-of-contents__link">Quickstart</a><ul><li><a href="#environment" class="table-of-contents__link">Environment</a></li><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites</a></li><li><a href="#deploy-godwoken" class="table-of-contents__link">Deploy Godwoken</a></li></ul></li><li><a href="#references" class="table-of-contents__link">References</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" activebasepath="docs" position="right" href="/ckb_sdk/docs/introduction/overview_go">Docs</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/ckb_sdk/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/ckb_sdk/styles.9a6c7397.js"></script>
<script src="/ckb_sdk/runtime~main.0a17a10f.js"></script>
<script src="/ckb_sdk/main.307d8fcc.js"></script>
<script src="/ckb_sdk/common.4c10f815.js"></script>
<script src="/ckb_sdk/27.cd73ab9e.js"></script>
<script src="/ckb_sdk/28.fc14df1c.js"></script>
<script src="/ckb_sdk/f976f453.df75b6c2.js"></script>
<script src="/ckb_sdk/17896441.153feb48.js"></script>
<script src="/ckb_sdk/9e4b9458.49cb3b71.js"></script>
</body>
</html>